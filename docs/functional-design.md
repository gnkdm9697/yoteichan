# äºˆå®šã¡ã‚ƒã‚“ - æ©Ÿèƒ½è¨­è¨ˆæ›¸

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ERå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     events      â”‚      â”‚   date_options  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚â”€â”€â”   â”‚ id (PK)         â”‚
â”‚ public_id       â”‚  â”‚   â”‚ event_id (FK)   â”‚â”€â”€â”
â”‚ passphrase      â”‚  â””â”€â”€â–¶â”‚ date            â”‚  â”‚
â”‚ title           â”‚      â”‚ start_time      â”‚  â”‚
â”‚ location        â”‚      â”‚ end_time        â”‚  â”‚
â”‚ description     â”‚      â”‚ created_at      â”‚  â”‚
â”‚ created_at      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ updated_at      â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                         â”‚    responses    â”‚  â”‚
                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                         â”‚ id (PK)         â”‚  â”‚
                         â”‚ event_id (FK)   â”‚â—€â”€â”˜
                         â”‚ date_option_id  â”‚
                         â”‚ name            â”‚
                         â”‚ status          â”‚
                         â”‚ created_at      â”‚
                         â”‚ updated_at      â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

#### eventsï¼ˆã‚¤ãƒ™ãƒ³ãƒˆï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------|-----|------|-----------|------|
| id | uuid | NO | gen_random_uuid() | ä¸»ã‚­ãƒ¼ |
| public_id | varchar(10) | NO | - | å…¬é–‹ç”¨IDï¼ˆçŸ­ã„ï¼‰ |
| passphrase | varchar(50) | NO | - | åˆè¨€è‘‰ï¼ˆå¹³æ–‡ï¼‰ |
| title | varchar(100) | NO | - | ã‚¤ãƒ™ãƒ³ãƒˆå |
| location | varchar(200) | YES | NULL | å ´æ‰€ |
| description | text | YES | NULL | èª¬æ˜ |
| created_at | timestamptz | NO | now() | ä½œæˆæ—¥æ™‚ |
| updated_at | timestamptz | NO | now() | æ›´æ–°æ—¥æ™‚ |

#### date_optionsï¼ˆå€™è£œæ—¥ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------|-----|------|-----------|------|
| id | uuid | NO | gen_random_uuid() | ä¸»ã‚­ãƒ¼ |
| event_id | uuid | NO | - | ã‚¤ãƒ™ãƒ³ãƒˆID (FK) |
| date | date | NO | - | æ—¥ä»˜ |
| start_time | time | YES | NULL | é–‹å§‹æ™‚é–“ï¼ˆNULLã¯çµ‚æ—¥ï¼‰ |
| end_time | time | YES | NULL | çµ‚äº†æ™‚é–“ |
| created_at | timestamptz | NO | now() | ä½œæˆæ—¥æ™‚ |

#### responsesï¼ˆå›ç­”ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------|-----|------|-----------|------|
| id | uuid | NO | gen_random_uuid() | ä¸»ã‚­ãƒ¼ |
| event_id | uuid | NO | - | ã‚¤ãƒ™ãƒ³ãƒˆID (FK) |
| date_option_id | uuid | NO | - | å€™è£œæ—¥ID (FK) |
| name | varchar(50) | NO | - | å›ç­”è€…å |
| status | varchar(10) | NO | - | ok / maybe / ng |
| created_at | timestamptz | NO | now() | ä½œæˆæ—¥æ™‚ |
| updated_at | timestamptz | NO | now() | æ›´æ–°æ—¥æ™‚ |

---

## APIè¨­è¨ˆ

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹ | èª¬æ˜ |
|---------|------|------|
| POST | `/api/events` | ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ |
| GET | `/api/events/[publicId]` | ã‚¤ãƒ™ãƒ³ãƒˆå–å¾— |
| POST | `/api/events/[publicId]/verify` | åˆè¨€è‘‰æ¤œè¨¼ |
| PUT | `/api/events/[publicId]` | ã‚¤ãƒ™ãƒ³ãƒˆæ›´æ–°ï¼ˆè¦åˆè¨€è‘‰ï¼‰ |
| DELETE | `/api/events/[publicId]` | ã‚¤ãƒ™ãƒ³ãƒˆå‰Šé™¤ï¼ˆè¦åˆè¨€è‘‰ï¼‰ |
| POST | `/api/events/[publicId]/responses` | å›ç­”ç™»éŒ²ãƒ»æ›´æ–° |

### POST /api/events
ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ

```json
// Request
{
  "title": "é£²ã¿ä¼š",
  "passphrase": "ã²ã¿ã¤123",
  "location": "æ¸‹è°·é§…å‘¨è¾º",
  "description": "æ–°å¹´ä¼šã§ã™ï¼",
  "dateOptions": [
    { "date": "2025-01-08", "startTime": null, "endTime": null },
    { "date": "2025-01-09", "startTime": "19:00", "endTime": "21:00" }
  ]
}

// Response (201)
{
  "publicId": "abc123",
  "shareUrl": "https://yoteichan.vercel.app/e/abc123"
}
```

### GET /api/events/[publicId]
ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—

```json
// Response (200)
{
  "id": "abc123",
  "title": "é£²ã¿ä¼š",
  "location": "æ¸‹è°·é§…å‘¨è¾º",
  "description": "æ–°å¹´ä¼šã§ã™ï¼",
  "dateOptions": [...],
  "responses": [...],
  "summary": { "uuid-1": { "ok": 2, "maybe": 0, "ng": 1 } }
}
```

### POST /api/events/[publicId]/verify
åˆè¨€è‘‰æ¤œè¨¼

```json
// Request
{ "passphrase": "ã²ã¿ã¤123" }

// Response (200)
{ "valid": true }

// Error (401)
{ "valid": false, "error": "åˆè¨€è‘‰ãŒé•ã„ã¾ã™" }
```

### POST /api/events/[publicId]/responses
å›ç­”ç™»éŒ²

```json
// Request
{
  "name": "ç”°ä¸­",
  "answers": { "uuid-1": "ok", "uuid-2": "maybe" }
}

// Response (200)
{ "success": true }
```

---

## ç”»é¢è¨­è¨ˆ

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
- **ãƒŸãƒ‹ãƒãƒ«**: ç™½åŸºèª¿ã€ä½™è¨ˆãªè£…é£¾ãªã—
- **ã‚¹ãƒãƒ›ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: ã‚¿ãƒƒãƒ—ã—ã‚„ã™ã„å¤§ãã‚ã®ãƒœã‚¿ãƒ³

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```css
--primary: #6366f1;    /* ã‚¤ãƒ³ãƒ‡ã‚£ã‚´ */
--ok: #22c55e;         /* â—‹ ç·‘ */
--maybe: #f59e0b;      /* â–³ ã‚ªãƒ¬ãƒ³ã‚¸ */
--ng: #ef4444;         /* Ã— èµ¤ */
--bg: #ffffff;
--text: #1e293b;
```

### 1. ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ (/)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ“… äºˆå®šã¡ã‚ƒã‚“       â”‚
â”‚  ã¿ã‚“ãªã®äºˆå®šã‚’         â”‚
â”‚  ã‹ã‚“ãŸã‚“èª¿æ•´           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   äºˆå®šã‚’ä½œæˆã™ã‚‹   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆãƒšãƒ¼ã‚¸ (/new)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† æˆ»ã‚‹                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚¤ãƒ™ãƒ³ãƒˆå *            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ é£²ã¿ä¼š            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ åˆè¨€è‘‰ *                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ã²ã¿ã¤123         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â€»ç·¨é›†æ™‚ã«å¿…è¦ã§ã™      â”‚
â”‚ å€™è£œæ—¥ã‚’é¸æŠ *          â”‚
â”‚ [ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼]            â”‚
â”‚ å ´æ‰€ï¼ˆä»»æ„ï¼‰            â”‚
â”‚ èª¬æ˜ï¼ˆä»»æ„ï¼‰            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚   ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½œæˆ   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. å›ç­”ãƒšãƒ¼ã‚¸ (/e/[id])

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… é£²ã¿ä¼š      [ç·¨é›†ã™ã‚‹]â”‚
â”‚ æ¸‹è°·é§…å‘¨è¾º              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚ãªãŸã®åå‰            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ç”°ä¸­              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”     â”‚
â”‚ â”‚     â”‚ â—‹ â”‚ â–³ â”‚ Ã— â”‚     â”‚
â”‚ â”‚1/8  â”‚[â—]â”‚   â”‚   â”‚     â”‚
â”‚ â”‚1/9  â”‚   â”‚[â—]â”‚   â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚     å›ç­”ã™ã‚‹       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã¿ã‚“ãªã®å›ç­” (3äºº)      â”‚
â”‚ [å›ç­”ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. åˆè¨€è‘‰å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ”‘ åˆè¨€è‘‰ã‚’å…¥åŠ›  [Ã—] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      ç¢ºèªã™ã‚‹      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. ç·¨é›†ãƒ¢ãƒ¼ãƒ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”“ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰  [çµ‚äº†]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç·¨é›†å¯èƒ½ãªãƒ•ã‚©ãƒ¼ãƒ ]    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚     å¤‰æ›´ã‚’ä¿å­˜     â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‰Šé™¤ ğŸ—‘  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆ

### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ“ä½œ
1. æ—¥ä»˜ã‚¿ãƒƒãƒ— â†’ é¸æŠçŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«
2. é¸æŠã—ãŸæ—¥ä»˜ã¯ä¸‹éƒ¨ãƒªã‚¹ãƒˆã«è¡¨ç¤º
3. å„æ—¥ä»˜ã®æ™‚é–“å¸¯ã‚’è¨­å®šå¯èƒ½

### å›ç­”æ“ä½œ
1. â—‹/â–³/Ã— ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã§åˆ‡ã‚Šæ›¿ãˆ
2. é¸æŠä¸­ã®ãƒœã‚¿ãƒ³ã¯è‰²ä»˜ãã§è¡¨ç¤º

### ç·¨é›†æ“ä½œï¼ˆåˆè¨€è‘‰èªè¨¼ï¼‰
1. ã€Œç·¨é›†ã™ã‚‹ã€â†’ åˆè¨€è‘‰å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«
2. èªè¨¼æˆåŠŸ â†’ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
3. ã€Œå¤‰æ›´ã‚’ä¿å­˜ã€â†’ é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã«æˆ»ã‚‹
