# 要件定義書: イベント編集時の回答リセット問題修正

## 概要

イベント編集時に、候補日を変更していなくても全ての回答がリセットされてしまうバグを修正する。

## 問題の詳細

### 現状の動作

1. イベント編集でタイトルや場所だけを変更して保存
2. 候補日(date_options)が全削除→再作成される
3. `ON DELETE CASCADE`により、紐づく回答(responses)も全削除される
4. ユーザーは既存の回答を失う

### 期待される動作

1. 候補日に変更がなければ、回答はそのまま保持される
2. 候補日が追加された場合、既存の回答は保持される
3. 候補日が削除された場合のみ、その候補日への回答が削除される
4. 候補日の内容（日時など）が変更された場合、その候補日への回答は保持される

## ユーザーストーリー

- **主催者として**、イベントのタイトルや場所を編集しても、参加者の回答が消えないようにしたい
- **主催者として**、候補日を追加しても、既存の回答が消えないようにしたい
- **主催者として**、候補日を削除した場合のみ、その候補日への回答が削除されることを理解したい

## 受け入れ基準

1. [ ] タイトル・場所・説明のみを変更した場合、回答は保持される
2. [ ] 新しい候補日を追加した場合、既存の回答は保持される
3. [ ] 既存の候補日の日時を変更した場合、その候補日への回答は保持される
4. [ ] 候補日を削除した場合、その候補日への回答のみが削除される
5. [ ] 回答がある候補日を削除しようとした場合、警告が表示される（オプション）

## 制約事項

- データベーススキーマの変更は最小限に抑える
- 既存の回答データに影響を与えない
- フロントエンドとバックエンドの整合性を保つ

## 対象範囲

### 対象

- `PUT /api/events/[publicId]` API
- `EditForm`コンポーネント
- `DateOptionEditor`コンポーネント

### 対象外

- 回答フォーム自体の変更
- データベーススキーマの変更
